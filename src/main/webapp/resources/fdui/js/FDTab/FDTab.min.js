var FDTab=function(a){FDLib.implement(this,FDControl);this.options=FDLib.util.apply(this.getOptions(),a);this.options.itemStore={};this.tabInstance=new this.options.view(this.options,this);this._buildTab(this.options.items)};FDTab.prototype={getOptions:function(){return{domId:"",items:[],isHover:false,view:FDTabView}},show:function(){this.tabInstance.show()},hide:function(){this.tabInstance.hide()},setValue:function(a){this.tabInstance.showItem(a)},setItems:function(a){this.removeAll();this.options.items=a;this._buildTab(a)},removeAll:function(){this.tabInstance.removeAll();this._resetData()},removeItemByValue:function(b){var a=this.getItemByValue(b);this.removeItem(a)},removeItemByIndex:function(a){var b=this.getItemByIndex(a);this.removeItem(b)},removeItem:function(a){if(a){this.tabInstance.removeItem(a);this._delItemDataByValue(a.value)}},addItem:function(a){this.addItems([a])},addItems:function(a){if(FDLib.util.isArray(a)){this.options.items=this.options.items.concat(a);this._buildTab(a)}},getItemByValue:function(a){return this.options.itemStore[a]},selectItemByValue:function(a){this.tabInstance.showItemByValue(a)},selectItemByIndex:function(a){var b=this.getItemByIndex(a);if(b){this.selectItemByValue(b.value)}},disableByValue:function(b){var a=this.getItemByValue(b);this.disable(a)},disableByIndex:function(a){var b=this.getItemByIndex(a);this.disable(b)},enableByValue:function(b){var a=this.getItemByValue(b);this.enable(a)},enableByIndex:function(a){var b=this.getItemByIndex(a);this.enable(b)},disable:function(a){if(a){this.tabInstance.disable(a)}},enable:function(a){if(a){this.tabInstance.enable(a)}},getItemByIndex:function(a){return this.options.items[a]},_initItems:function(b){var a=this;var c=this._refreshPermissionItems(b);FDLib.util.each(c,function(d){d=a._checkValueAndContentId(d);d=a._checkContentDiv(d);a._storeItem(d)});return c},_refreshPermissionItems:function(a){var b=[];FDLib.util.each(a,function(c){FDRight.checkByCode(c.operateCode,function(){b.push(c)})});this.options.items=b;return b},_buildTab:function(a){var b=this._initItems(a);this.tabInstance.buildTab(b)},_resetData:function(){this.options.itemStore={};this.options.item=[]},_delItemDataByValue:function(c){var b=0;var a=this.options.items;FDLib.util.each(a,function(e,d){if(e.value==c){b=d;return false}});this._delItemData(b);this._delItemStoreByValue(c)},_delItemData:function(b){var a=this.options.items;if(a.length>b){a.splice(b,1)}},_delItemStoreByValue:function(a){delete this.options.itemStore[a]},_storeItem:function(a){this.options.itemStore[a.value]=a},_checkValueAndContentId:function(c){var a=FDLib.util;var b=FDControl.generateCount();if(a.isUndefined(c.value)){c.value="tabValue_"+b}if(a.isUndefined(c.contentId)){c.contentId="tabContId_"+b}return c},_checkContentDiv:function(c){if(FDLib.util.isUndefined(c.content)){c.content=""}var d=c.contentId,b=c.content;var a=null;if(d&&FDLib.util.isString(d)){a=FDLib.getEl(d)}if(!a){a=this._buildContentDiv(c)}c.contentDiv=a;return c},_buildContentDiv:function(b){var c=b.contentId;var a=document.createElement(FDTag.DIV);a.setAttribute("id",c);a.innerHTML=b.content;this._buildIFrame(a,b);return a},_buildIFrame:function(c,d){var a=d.url;if(FDLib.util.isString(a)&&a){var b=document.createElement(FDTag.IFRAME);b.style.cssText="width:100%;height:100%;border:0px;";d.iframe=b;c.style.height="100%";c.appendChild(b)}}};
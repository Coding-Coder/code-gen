(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88defa5c"],{b85c:function(t,n,e){"use strict";function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}function a(t,n){if(t){if("string"===typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,n):void 0}}function r(t,n){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=a(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==e["return"]||e["return"]()}finally{if(l)throw i}}}}e.d(n,"a",(function(){return r}))},da5e:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.onGroupAdd}},[t._v("添加模板组")]),t._v(" "),e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(n){t.activeName=n},expression:"activeName"}},[t._l(t.groupData,(function(n){return e("el-tab-pane",{key:n.id,attrs:{name:""+n.id,label:n.groupName}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        "+t._s(n.groupName)+"\n        "),e("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:n.id===t.currentTab.id,expression:"item.id === currentTab.id"}],staticStyle:{"margin-left":"5px"},attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[e("el-tooltip",{attrs:{placement:"top",content:"更多操作","open-delay":500}},[e("a",{staticClass:"el-icon-setting el-icon--right"})])],1),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{icon:"el-icon-edit",command:t.onGroupInfoUpdate}},[t._v("修改")]),t._v(" "),e("el-dropdown-item",{attrs:{icon:"el-icon-delete",command:t.onGroupInfoDelete}},[t._v("删除")])],1)],1)],1)])})),t._v(" "),e("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:t.onAdd}},[t._v("新增模板")]),t._v(" "),e("el-table",{attrs:{data:t.tableData,border:"","highlight-current-row":""}},[e("el-table-column",{attrs:{prop:"name",label:"模板名称",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"fileName",label:"文件名称"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.onTableUpdate(n.row)}}},[t._v("修改")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.onTableDelete(n.row)}}},[t._v("删除")])]}}])})],1)],2)],1)},a=[],r=(e("7f7f"),e("b85c")),i={data:function(){return{activeName:"",tableData:[],groupData:[],currentTab:{id:0}}},created:function(){this.reload()},methods:{reload:function(){this.loadGroup()},loadGroup:function(){this.post("/group/list",{},(function(t){this.groupData=t.data;var n=this.currentTab.id;!n&&this.groupData.length>0&&(n=this.groupData[0].id),n&&this.selectTab(n)}))},selectTab:function(t){var n,e=Object(r["a"])(this.groupData);try{for(e.s();!(n=e.n()).done;){var o=n.value;if(o.id===t){this.currentTab=o;break}}}catch(a){e.e(a)}finally{e.f()}this.loadTable(t)},loadTable:function(t){this.activeName="".concat(t),this.post("/template/list?groupId=".concat(t),{},(function(t){this.tableData=t.data}))},handleClick:function(t){var n=parseInt(t.name);n&&this.selectTab(parseInt(n))},onTableUpdate:function(t){this.goRoute("edit/".concat(t.id))},onTableDelete:function(t){this.confirm("确认要删除【".concat(t.name,"】吗？"),(function(n){this.post("/template/del",t,(function(){n(),this.tip("删除成功"),this.reload()}))}))},onAdd:function(){this.goRoute("edit/0?groupId=".concat(this.currentTab.id))},onGroupInfoUpdate:function(){this.onGroupUpdate(this.currentTab)},onGroupInfoDelete:function(){this.onGroupDelete(this.currentTab)},onGroupAdd:function(){var t=this;this.groupTitle="增加模板组",this.$prompt("请输入组名称","增加模板组",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:"",inputPattern:/^.{1,64}$/,inputErrorMessage:"不能为空且长度在64以内"}).then((function(n){var e=n.value,o={groupName:e};t.post("/group/add",o,(function(n){t.currentTab=n.data,t.reload()}))})).catch((function(){}))},onGroupUpdate:function(t){var n=this;this.$prompt("请输入组名称","修改模板组",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.groupName,inputPattern:/^.{1,64}$/,inputErrorMessage:"不能为空且长度在64以内"}).then((function(e){var o=e.value,a={id:t.id,groupName:o};n.post("/group/update",a,(function(t){n.reload()}))})).catch((function(){}))},onGroupDelete:function(t){this.confirm("确认要删除【".concat(t.groupName,"】吗？"),(function(n){this.post("/group/del",t,(function(){n(),this.tip("删除成功"),this.currentTab.id=0,this.reload()}))}))}}},c=i,l=e("2877"),u=Object(l["a"])(c,o,a,!1,null,null,null);n["default"]=u.exports}}]);
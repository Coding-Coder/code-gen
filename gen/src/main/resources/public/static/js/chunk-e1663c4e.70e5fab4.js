(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1663c4e"],{"067a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit-outline"}),t._v(" 生成代码")]),t._v(" "),a("generate-config")],1),t._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 生成历史")]),t._v(" "),a("generate-history")],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"code-gen"},[a("el-form",{ref:"genForm",staticClass:"gen-form",attrs:{model:t.clientParam,size:"mini","label-width":"150px"}},[a("el-form-item",{attrs:{label:"选择数据源",prop:"datasourceConfigId",rules:{required:!0,message:"请选择数据源"}}},[a("el-select",{attrs:{placeholder:"选择数据源"},on:{change:t.onDataSourceChange},model:{value:t.clientParam.datasourceConfigId,callback:function(e){t.$set(t.clientParam,"datasourceConfigId",e)},expression:"clientParam.datasourceConfigId"}},t._l(t.datasourceConfigList,(function(e){return a("el-option",{key:e.id,attrs:{label:t.getDatasourceLabel(e),value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(t.getDatasourceLabel(e)))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a("el-tooltip",{attrs:{placement:"top",content:"Duplicate"}},[a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:function(a){return a.stopPropagation(),t.onDataSourceDuplicate(e)}}})],1),t._v(" "),a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return a.stopPropagation(),t.onDataSourceUpdate(e)}}}),t._v(" "),a("el-link",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return a.stopPropagation(),t.onDataSourceDelete(e)}}})],1)])})),1),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.onDataSourceAdd}},[t._v("新建数据源")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],attrs:{label:"包名（package）"}},[a("el-input",{attrs:{placeholder:"可选，如：cn.studyjava.xxx","show-word-limit":"",maxlength:"100"},model:{value:t.clientParam.packageName,callback:function(e){t.$set(t.clientParam,"packageName",e)},expression:"clientParam.packageName"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],attrs:{label:"删除前缀"}},[a("el-input",{attrs:{placeholder:"可选，如：sys_user对应Java类为User(多前缀逗号隔开)","show-word-limit":"",maxlength:"100"},model:{value:t.clientParam.delPrefix,callback:function(e){t.$set(t.clientParam,"delPrefix",e)},expression:"clientParam.delPrefix"}})],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("h4",[t._v("选择表")]),t._v(" "),a("el-input",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{"prefix-icon":"el-icon-search",clearable:"",size:"mini",placeholder:"过滤表"},model:{value:t.tableSearch,callback:function(e){t.tableSearch=e},expression:"tableSearch"}}),t._v(" "),a("el-table",{attrs:{data:t.tableListData,border:"","cell-style":t.cellStyleSmall(),"header-cell-style":t.headCellStyleSmall(),"row-class-name":t.tableRowClassName},on:{"selection-change":t.onTableListSelect}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tableName",label:"表名"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12,id:"templateSelect"}},[a("h4",[t._v("选择模板")]),t._v(" "),a("el-select",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{placeholder:"选择模板所在组",size:"mini"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}},[t._v("\n            "+t._s(e.groupName)+"\n          ")])})),1),t._v(" "),a("el-table",{attrs:{data:t.templateListData,border:"","cell-style":t.cellStyleSmall(),"header-cell-style":t.headCellStyleSmall(),"row-class-name":t.templateTableRowClassName},on:{"selection-change":t.onTemplateListSelect}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模板名称"},scopedSlots:t._u([{key:"default",fn:function(e){return a("span",{},[t._v("\n              "+t._s(e.row.name)+"\n            ")])}}])})],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],attrs:{type:"primary"},on:{click:t.onGenerate}},[t._v("生成代码")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.datasourceTitle,visible:t.datasourceDlgShow},on:{"update:visible":function(e){t.datasourceDlgShow=e}}},[a("el-form",{ref:"datasourceForm",attrs:{model:t.datasourceFormData,rules:t.datasourceRule,size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"数据库类型"}},[a("el-select",{attrs:{filterable:"","default-first-option":""},model:{value:t.datasourceFormData.dbType,callback:function(e){t.$set(t.datasourceFormData,"dbType",e)},expression:"datasourceFormData.dbType"}},t._l(t.dbTypeConfig,(function(t){return a("el-option",{key:t.dbType,attrs:{label:t.label,value:t.dbType}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Host",prop:"host"}},[a("el-input",{attrs:{placeholder:"地址","show-word-limit":"",maxlength:"100"},model:{value:t.datasourceFormData.host,callback:function(e){t.$set(t.datasourceFormData,"host",e)},expression:"datasourceFormData.host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Port",prop:"port"}},[a("el-input",{attrs:{placeholder:"端口","show-word-limit":"",maxlength:"10"},model:{value:t.datasourceFormData.port,callback:function(e){t.$set(t.datasourceFormData,"port",e)},expression:"datasourceFormData.port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Database",prop:"dbName"}},[a("el-input",{attrs:{placeholder:"数据库","show-word-limit":"",maxlength:"64"},model:{value:t.datasourceFormData.dbName,callback:function(e){t.$set(t.datasourceFormData,"dbName",e)},expression:"datasourceFormData.dbName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Username",prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名","show-word-limit":"",maxlength:"100"},model:{value:t.datasourceFormData.username,callback:function(e){t.$set(t.datasourceFormData,"username",e)},expression:"datasourceFormData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Password",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码","show-word-limit":"",maxlength:"100"},model:{value:t.datasourceFormData.password,callback:function(e){t.$set(t.datasourceFormData,"password",e)},expression:"datasourceFormData.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[a("el-input",{attrs:{placeholder:"包名（package）","show-word-limit":"",maxlength:"100"},model:{value:t.datasourceFormData.packageName,callback:function(e){t.$set(t.datasourceFormData,"packageName",e)},expression:"datasourceFormData.packageName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"删除前缀",prop:"delPrefix"}},[a("el-input",{attrs:{placeholder:"删除前缀（表名sys_user删除前缀sys_对应bean为User）多前缀逗号隔开","show-word-limit":"",maxlength:"200"},model:{value:t.datasourceFormData.delPrefix,callback:function(e){t.$set(t.datasourceFormData,"delPrefix",e)},expression:"datasourceFormData.delPrefix"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"代码生成器模板",prop:"delPrefix"}},[a("el-select",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{placeholder:"选择模板所在组",size:"mini"},model:{value:t.datasourceFormData.groupId,callback:function(e){t.$set(t.datasourceFormData,"groupId",e)},expression:"datasourceFormData.groupId"}},t._l(t.groupData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}},[t._v("\n              "+t._s(e.groupName)+"\n            ")])})),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:t.onDatasourceTest}},[t._v("测试连接")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onDatasourceSave}},[t._v("保存")])],1)],1)],1)],1)},l=[],s=(a("456d"),a("ac6a"),a("2d63")),i="gen-datasource-id",c={name:"GenerateConfig",data:function(){return{groupId:"",groupData:[],showTable:!1,clientParam:{datasourceConfigId:"",tableNames:[],templateConfigIdList:[],packageName:"",delPrefix:"",groupId:""},tableSearch:"",datasourceConfigList:[],tableListData:[],templateListData:[],datasourceTitle:"新建连接",datasourceDlgShow:!1,datasourceFormData:{id:0,dbType:1,host:"",port:"",username:"",password:"",dbName:"",packageName:"",delPrefix:"",groupId:""},dbTypeConfig:[],datasourceRule:{host:[{required:!0,message:"不能为空",trigger:"blur"}],port:[{required:!0,message:"不能为空",trigger:"blur"}],username:[{required:!0,message:"不能为空",trigger:"blur"}],password:[{required:!0,message:"不能为空",trigger:"blur"}],dbName:[{required:!0,message:"不能为空",trigger:"blur"}]}}},watch:{"clientParam.datasourceConfigId":function(t){var e,a=Object(s["a"])(this.datasourceConfigList);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(o.id===t){this.groupId=o.groupId,Object.assign(this.clientParam,{packageName:o.packageName,delPrefix:o.delPrefix,groupId:o.groupId});break}}}catch(r){a.e(r)}finally{a.f()}}},created:function(){this.loadDataSource(),this.loadTemplate(),this.loadDbType(),this.loadGroups()},methods:{tableRowClassName:function(t){var e=t.row;t.index;return e.hidden=!1,0===this.tableSearch.length||e.tableName&&e.tableName.toLowerCase().indexOf(this.tableSearch.toLowerCase())>-1?"":(e.hidden=!0,"hidden-row")},templateTableRowClassName:function(t){var e=t.row;t.index;return e.hidden=!1,""==this.groupId||this.groupId<=0||e.groupId&&e.groupId==this.groupId?"":(e.hidden=!0,"hidden-row")},getDatasourceLabel:function(t){return"".concat(t.dbName," (").concat(t.host,") - ").concat(t.username)},loadGroups:function(){this.post("/group/list/",{},(function(t){this.groupData=t.data}))},loadDataSource:function(){var t=this,e=this.getCurrentDataSourceId();this.post("/datasource/list",{},(function(a){var o,r=a.data;t.datasourceConfigList=r;var n,l=Object(s["a"])(r);try{for(l.s();!(n=l.n()).done;){var i=n.value;if(i.id===e){o=i.id;break}}}catch(c){l.e(c)}finally{l.f()}!o&&r.length>0&&(o=r[0].id),o&&t.onDataSourceChange(parseInt(o))}))},loadTemplate:function(){var t=this;this.post("/template/list",{},(function(e){t.templateListData=e.data}))},loadDbType:function(){var t=this;this.post("/datasource/dbtype",{},(function(e){t.dbTypeConfig=e.data}))},setCurrentDataSourceId:function(t){this.setAttr(i,t)},getCurrentDataSourceId:function(){var t=this.getAttr(i);return parseInt(t)||""},onDataSourceAdd:function(){var t=this;this.datasourceTitle="新建连接",Object.keys(this.datasourceFormData).forEach((function(e){t.datasourceFormData[e]=""})),this.datasourceFormData.id=0,this.datasourceDlgShow=!0,this.$nextTick((function(){t.groupData.length>0&&(t.datasourceFormData.groupId=t.groupData[0].id)}))},onTableListSelect:function(t){this.clientParam.tableNames=t.filter((function(t){return void 0===t.hidden||!1===t.hidden})).map((function(t){return t.tableName}))},onTemplateListSelect:function(t){this.clientParam.templateConfigIdList=t.filter((function(t){return void 0===t.hidden||!1===t.hidden})).map((function(t){return t.id}))},onDataSourceChange:function(t){var e=this;this.setCurrentDataSourceId(t),this.clientParam.datasourceConfigId=t,this.post("/datasource/table/".concat(t),{},(function(t){e.showTable=!0,e.tableListData=t.data}))},onDataSourceUpdate:function(t){this.datasourceTitle="修改连接",Object.assign(this.datasourceFormData,t),this.datasourceDlgShow=!0},onDataSourceDuplicate:function(t){this.datasourceTitle="".concat(t.host," Copy"),Object.assign(this.datasourceFormData,t),this.datasourceFormData.id=0,this.datasourceDlgShow=!0},onDataSourceDelete:function(t){this.confirm("确认要删除 ".concat(t.dbName," 吗？"),(function(e){var a={id:t.id};this.post("/datasource/del",a,(function(){e(),location.reload()}))}))},onGenerate:function(){var t=this;this.$refs.genForm.validate((function(e){if(e){if(0===t.clientParam.tableNames.length)return void t.tip("请勾选表","error");if(0===t.clientParam.templateConfigIdList.length)return void t.tip("请勾选模板","error");var a=JSON.stringify(t.clientParam);t.goRoute("result/".concat(a))}}))},onDatasourceTest:function(){var t=this;this.$refs.datasourceForm.validate((function(e){e&&t.post("/datasource/test",t.datasourceFormData,(function(e){t.tip("连接成功")}))}))},onDatasourceSave:function(){var t=this;this.$refs.datasourceForm.validate((function(e){e&&t.post("/datasource/test",t.datasourceFormData,(function(e){t.datasourceFormData.id?t.post("/datasource/update",t.datasourceFormData,(function(t){location.reload()})):t.post("/datasource/add",t.datasourceFormData,(function(e){t.tip("添加成功"),t.loadDataSource(),t.datasourceDlgShow=!1}))}))}))}}},u=c,d=(a("da9a"),a("2877")),p=Object(d["a"])(u,n,l,!1,null,null,null),m=p.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{data:t.tableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"generateTime",label:"生成时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"datasource",label:"数据源",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"packageName",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.configContent.packageName)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"删除前缀",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.configContent.delPrefix)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"表名"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.configContent.tableNames.length<=5?a("div",[t._v("\n          "+t._s(e.row.configContent.tableNames.join("、"))+"\n        ")]):a("div",[t._v("\n          "+t._s(t.showArray(e.row.configContent.tableNames,3,"、"))+"\n          "),a("el-popover",{attrs:{placement:"left",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.row.configContent.tableNames,"max-height":"400px"}},[a("el-table-column",{attrs:{label:"表名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row))]}}],null,!0)})],1),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("更多")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"templateNames",label:"模板","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.templateNames&&e.row.templateNames.join("、"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.onGenerate(e.row)}}},[t._v("再次生成")])]}}])})],1)],1)},h=[],b={name:"GenerateHistory",data:function(){return{tableData:[]}},created:function(){this.loadTable()},methods:{loadTable:function(){this.post("/history/list",{},(function(t){this.tableData=t.data}))},onGenerate:function(t){var e=JSON.stringify(t.configContent);this.goRoute("result/".concat(e))},showArray:function(t,e,a){if(!t||0===t.length)return"";for(var o=[],r=0;r<Math.min(e,t.length);r++)o.push(t[r]);return o.join(a)}}},g=b,v=Object(d["a"])(g,f,h,!1,null,null,null),w=v.exports,y={components:{GenerateConfig:m,GenerateHistory:w},data:function(){return{activeName:"first"}}},D=y,_=Object(d["a"])(D,o,r,!1,null,null,null);e["default"]=_.exports},"1af6":function(t,e,a){var o=a("63b6");o(o.S,"Array",{isArray:a("9003")})},"2d63":function(t,e,a){"use strict";var o=a("5d73"),r=a.n(o),n=a("a745"),l=a.n(n),s=a("5d58"),i=a.n(s),c=a("67bb"),u=a.n(c),d=a("774e"),p=a.n(d);function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function f(t,e){if(t){if("string"===typeof t)return m(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?p()(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(t,e):void 0}}function h(t,e){var a;if("undefined"===typeof u.a||null==t[i.a]){if(l()(t)||(a=f(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,d=!1;return{s:function(){a=r()(t)},n:function(){var t=a.next();return c=t.done,t},e:function(t){d=!0,s=t},f:function(){try{c||null==a["return"]||a["return"]()}finally{if(d)throw s}}}}a.d(e,"a",(function(){return h}))},"456d":function(t,e,a){var o=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(t){return r(o(t))}}))},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"549b":function(t,e,a){"use strict";var o=a("d864"),r=a("63b6"),n=a("241e"),l=a("b0dc"),s=a("3702"),i=a("b447"),c=a("20fd"),u=a("7cd6");r(r.S+r.F*!a("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,r,d,p=n(t),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,b=void 0!==h,g=0,v=u(p);if(b&&(h=o(h,f>2?arguments[2]:void 0,2)),void 0==v||m==Array&&s(v))for(e=i(p.length),a=new m(e);e>g;g++)c(a,g,b?h(p[g],g):p[g]);else for(d=v.call(p),a=new m;!(r=d.next()).done;g++)c(a,g,b?l(d,h,[r.value,g],!0):r.value);return a.length=g,a}})},"5d58":function(t,e,a){t.exports=a("d8d6")},"5d73":function(t,e,a){t.exports=a("469f")},"5eda":function(t,e,a){var o=a("5ca1"),r=a("8378"),n=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],l={};l[t]=e(a),o(o.S+o.F*n((function(){a(1)})),"Object",l)}},"67bb":function(t,e,a){t.exports=a("f921")},"774e":function(t,e,a){t.exports=a("d2d5")},"7d7b":function(t,e,a){var o=a("e4ae"),r=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return o(e.call(t))}},a745:function(t,e,a){t.exports=a("f410")},c1ad:function(t,e,a){},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},da9a:function(t,e,a){"use strict";var o=a("c1ad"),r=a.n(o);r.a},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);
var FDWindowDomView=function(a){FDWindowDomView.superclass.constructor.call(this,a);this.buttonPanel=null;this._createButtons();this.setDragable();this.setPanelClick()};FDLib.extend(FDWindowDomView,FDPanelDomView);FDWindowDomView.zIndex=200;FDWindowDomView.getNextZ_Index=function(){return ++FDWindowDomView.zIndex};FDWindowDomView.prototype.show=function(b){if(this.options.modal){this.showBgModal()}this.addPanelZ_Index();FDWindowDomView.superclass.show.call(this);var a=this.options.afterShow;if(FDLib.util.isFunction(a)){a()}if(FDLib.util.isFunction(b)){b()}};FDWindowDomView.prototype.addPanelZ_Index=function(){this.panel.style.zIndex=FDWindowDomView.getNextZ_Index()};FDWindowDomView.prototype.close=function(a){this.hideBgModal();FDWindowDomView.superclass.close.call(this);if(FDLib.util.isFunction(a)){a()}};FDWindowDomView.prototype.afterExpand=function(){FDLib.dom.showDom(this.buttonPanel)};FDWindowDomView.prototype.afterCollapse=function(){FDLib.dom.hideDom(this.buttonPanel)};FDWindowDomView.prototype.hideBgModal=function(){this.getBgModal().style.display="none"};FDWindowDomView._createBgModal=function(){var a=document.createElement(FDTag.DIV);a.className="ui-widget-overlay";a.style.display="none";return a};FDWindowDomView.prototype.getBgModal=function(){if(!this.bgModal){this.bgModal=FDWindowDomView._createBgModal();document.body.appendChild(this.bgModal)}return this.bgModal};FDWindowDomView.prototype.showBgModal=function(){var h=FDWindowDomView.getNextZ_Index();var f=document;var c=f.body;var g=f.documentElement;var d=g.clientHeight||c.clientHeight;var e=g.scrollHeight||c.scrollHeight;var b=Math.max(d,e);var a=this.getBgModal();a.style.height=b+"px";a.style.zIndex=h;a.style.display="block"};FDWindowDomView.prototype.moveTo=function(b,a){this.panel.style.left=b+"px";this.panel.style.top=a+"px"};FDWindowDomView.prototype.setDragable=function(){if(this.couldMoveWindow()){FDDragUtil.regist(this.panel,this.titleBar);this.moveToCenter()}else{FDDragUtil.destory(this.titleBar)}};FDWindowDomView.prototype.setPanelClick=function(){var a=this;FDLib.event.addEvent(this.panel,"mousedown",function(b){a.addPanelZ_Index()})};FDWindowDomView.prototype._createButtons=function(){var b=this.options.buttons;var a=[];if(FDLib.util.isArray(b)){FDLib.util.each(b,function(d,c){if(!(d instanceof FDButton)){d=new FDButton(d);b[c]=d}a.push(d)});this._appendButtons(a)}};FDWindowDomView.prototype._appendButtons=function(b){var a=this;if(b.length>0){if(!this.buttonPanel){this.buttonPanel=this.createEl(FDTag.DIV,this.getButtonPanelClassName());this.panel.appendChild(this.buttonPanel)}this.buttonPanel.innerHTML="";FDLib.util.each(b,function(c){c.renderToDom(a.buttonPanel)})}};FDWindowDomView.prototype.moveToCenter=function(){var b=this.options.width;var a=this.options.height;FDDragUtil.moveToCenter(this.panel,b,a)};FDWindowDomView.prototype.couldMoveWindow=function(){return this.options.dragable};FDWindowDomView.prototype.getTitleBarBtnClassName=function(){return"pui-dialog-titlebar-icon pui-dialog-titlebar-close ui-corner-all"};FDWindowDomView.prototype.getTitleClassName=function(){return"pui-dialog-title"};FDWindowDomView.prototype.getPanelClassName=function(){var a="pui-dialog ui-widget ui-widget-content ui-corner-all pui-shadow";if(this.options.dragable){a+=" ui-draggable"}return a};FDWindowDomView.prototype.getTitleBarClassName=function(){return"pui-dialog-titlebar ui-widget-header ui-helper-clearfix ui-corner-top"};FDWindowDomView.prototype.getContentClassName=function(){return"pui-dialog-content ui-widget-content"};FDWindowDomView.prototype.getCloseIconClassName=function(){return"ui-icon ui-icon-close"};FDWindowDomView.prototype.getButtonPanelClassName=function(){return"pui-dialog-buttonpane ui-widget-content ui-helper-clearfix"};
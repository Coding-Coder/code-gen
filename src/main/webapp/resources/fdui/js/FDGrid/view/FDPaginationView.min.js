var FDPaginationView=function(a,b){this.grid=b;this.options=a;this.gridDomMap=this.options.gridDomMap;this.settingView=new FDSettingView(this.options);this.paginInfoDiv;this.firstBtn=null;this.prevBtn=null;this.nextBtn=null;this.lastBtn=null};FDPaginationView.prototype.refreshPaginationInfo=function(a){if(this.options.showPaging){this.options.total=parseInt(a[GlobalParams.serverTotalName]||0);this.options.pageIndex=parseInt(a[GlobalParams.serverPageIndexName]||1);this.options.pageSize=parseInt(a[GlobalParams.serverPageSizeName]||10);this.options.pageCount=FDPaginationView.calcPageCount(this.options.pageSize,this.options.total);this.paginInfoDiv.innerHTML="&nbsp;&nbsp;第"+this.options.pageIndex+"/"+this.options.pageCount+"页，共"+this.options.total+"条数据&nbsp;&nbsp;";this.pageSizeSelect.setValue(this.options.pageSize);this._initBtnState()}};FDPaginationView.calcPageCount=function(a,b){return a==0?1:parseInt((b+a-1)/a)};FDPaginationView.prototype._initBtnState=function(a){if(this.options.pageIndex==1){FDLib.dom.addClass(this.firstBtn,"ui-state-disabled");FDLib.dom.addClass(this.prevBtn,"ui-state-disabled")}else{FDLib.dom.removeClass(this.firstBtn,"ui-state-disabled");FDLib.dom.removeClass(this.prevBtn,"ui-state-disabled")}if(this.options.pageIndex==this.options.pageCount){FDLib.dom.addClass(this.nextBtn,"ui-state-disabled");FDLib.dom.addClass(this.lastBtn,"ui-state-disabled")}else{FDLib.dom.removeClass(this.nextBtn,"ui-state-disabled");FDLib.dom.removeClass(this.lastBtn,"ui-state-disabled")}};FDPaginationView.prototype.hide=function(){if(this.gridDomMap.pageDiv_3){FDLib.dom.hideDom(this.gridDomMap.pageDiv_3)}};FDPaginationView.prototype.show=function(){if(this.gridDomMap.pageDiv_3){FDLib.dom.showDom(this.gridDomMap.pageDiv_3)}};FDPaginationView.prototype.buildPagination=function(){if(!this.gridDomMap.pageDiv_3){this._initPaginDom();this._buidlPaginButtons();this._appendPaginToDiv()}};FDPaginationView.prototype._initPaginDom=function(){this.gridDomMap.pageDiv_3=document.createElement(FDTag.DIV);this.gridDomMap.pageDiv_3.className="pui-paginator ui-widget-header";this.paginInfoDiv=document.createElement(FDTag.DIV)};FDPaginationView.prototype._appendPaginToDiv=function(){this.gridDomMap.gridDiv_3.appendChild(this.gridDomMap.pageDiv_3)};FDPaginationView.prototype._buidlPaginButtons=function(){if(this.options.showPaging){this._buildPageSizeSelector();this._buildFirstPageButton();this._buildPrePageButton();this._buildNextPageButton();this._buildLastPageButton();this._buildResultInfo()}if(this.options.showSetting){this._buildSettingButton()}if(!this.options.showPaging&&!this.options.showSetting){this.hide()}};FDPaginationView.prototype._buildPageSizeSelector=function(){var b=document.createElement(FDTag.SPAN);b.className="pui-paginator-last pui-paginator-element";var a=this;this.pageSizeSelect=new FDSelectBox({items:this._getPageSizeItems(),showDefault:false});this.pageSizeSelect.addEvent("change",function(){a.options.pageSize=this.value;a.options.pageIndex=1;a.grid.refresh()});this.pageSizeSelect.renderToDom(b);this.gridDomMap.pageDiv_3.appendChild(b)};FDPaginationView.prototype._getPageSizeItems=function(){var b=this.options.pageSizeParam;var a=[];FDLib.util.each(b,function(c){a.push({value:c,text:"每页"+c+"条"})});return a};FDPaginationView.prototype._buildFirstPageButton=function(b,c){var a=this;this.firstBtn=this._createButton({btnClassName:"pui-paginator-first pui-paginator-element ui-state-default ui-corner-all",iconClassName:"ui-icon ui-icon-seek-first",title:"首页"});FDLib.event.addEvent(this.firstBtn,"click",function(){a.grid.moveFirst()});this.gridDomMap.pageDiv_3.appendChild(this.firstBtn)};FDPaginationView.prototype._buildPrePageButton=function(b,c){var a=this;this.prevBtn=this._createButton({btnClassName:"pui-paginator-prev pui-paginator-element ui-state-default ui-corner-all",iconClassName:"ui-icon ui-icon-seek-prev",title:"上一页"});FDLib.event.addEvent(this.prevBtn,"click",function(){a.grid.movePreview()});this.gridDomMap.pageDiv_3.appendChild(this.prevBtn)};FDPaginationView.prototype._buildNextPageButton=function(b,c){var a=this;this.nextBtn=this._createButton({btnClassName:"pui-paginator-next pui-paginator-element ui-state-default ui-corner-all",iconClassName:"ui-icon ui-icon-seek-next",title:"下一页"});FDLib.event.addEvent(this.nextBtn,"click",function(){a.grid.moveNext()});this.gridDomMap.pageDiv_3.appendChild(this.nextBtn)};FDPaginationView.prototype._buildLastPageButton=function(b,c){var a=this;this.lastBtn=this._createButton({btnClassName:"pui-paginator-last pui-paginator-element ui-state-default ui-corner-all",iconClassName:"ui-icon ui-icon-seek-end",title:"尾页"});FDLib.event.addEvent(this.lastBtn,"click",function(){a.grid.moveLast()});this.gridDomMap.pageDiv_3.appendChild(this.lastBtn)};FDPaginationView.prototype._createButton=function(a){var b=document.createElement(FDTag.SPAN);b.className=a.btnClassName;var c=document.createElement(FDTag.SPAN);c.className=a.iconClassName;c.innerHTML="p";b.appendChild(c);if(a.title){b.setAttribute("title",a.title)}FDLib.event.addEvent(b,"mouseover",function(d){if(!FDLib.dom.hasClass(b,"ui-state-disabled")){FDLib.dom.addClass(b,"ui-state-hover")}d.stopPropagation()});FDLib.event.addEvent(b,"mouseout",function(d){FDLib.dom.removeClass(b,"ui-state-hover");d.stopPropagation()});return b};FDPaginationView.prototype._buildResultInfo=function(){this.paginInfoDiv=document.createElement(FDTag.SPAN);this.gridDomMap.pageDiv_3.appendChild(this.paginInfoDiv)};FDPaginationView.prototype._buildSettingButton=function(){var a=this;var b=this._createNormalButton("设置");FDLib.event.addEvent(b,"click",function(){a.settingView.showWin()});this.gridDomMap.pageDiv_3.appendChild(b)};FDPaginationView.prototype._createNormalButton=function(b){var a=document.createElement(FDTag.SPAN);a.className="pui-paginator-last pui-paginator-element ui-state-default ui-corner-all";a.innerHTML=b;FDLib.event.addEvent(a,"mouseover",function(c){FDLib.dom.addClass(a,"ui-state-hover");c.stopPropagation()});FDLib.event.addEvent(a,"mouseout",function(c){FDLib.dom.removeClass(a,"ui-state-hover");c.stopPropagation()});return a};
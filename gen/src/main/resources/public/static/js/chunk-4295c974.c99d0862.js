(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4295c974"],{"067a":function(a,e,t){"use strict";t.r(e);var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"app-container code-gen"},[t("el-form",{ref:"genForm",staticClass:"gen-form",attrs:{model:a.clientParam,size:"mini","label-width":"150px"}},[t("el-form-item",{attrs:{label:"选择数据源",prop:"datasourceConfigId",rules:{required:!0,message:"请选择数据源"}}},[t("el-select",{attrs:{placeholder:"选择数据源"},on:{change:a.onDataSourceChange},model:{value:a.clientParam.datasourceConfigId,callback:function(e){a.$set(a.clientParam,"datasourceConfigId",e)},expression:"clientParam.datasourceConfigId"}},a._l(a.datasourceConfigList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.dbName+"（"+e.host+"）",value:e.id}},[t("span",{staticStyle:{float:"left"}},[a._v(a._s(e.dbName+"（"+e.host+"）")+" ")]),a._v(" "),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t("el-tooltip",{attrs:{placement:"top",content:"Duplicate"}},[t("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:function(t){return t.stopPropagation(),a.onDataSourceDuplicate(e)}}})],1),a._v(" "),t("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return t.stopPropagation(),a.onDataSourceUpdate(e)}}}),a._v(" "),t("el-link",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),a.onDataSourceDelete(e)}}})],1)])})),1),a._v(" "),t("el-button",{attrs:{type:"text"},on:{click:a.onDataSourceAdd}},[a._v("新建数据源")])],1),a._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:a.showTable,expression:"showTable"}],attrs:{label:"包名（package）"}},[t("el-input",{attrs:{placeholder:"可选，如：cn.studyjava.xxx","show-word-limit":"",maxlength:"100"},model:{value:a.clientParam.packageName,callback:function(e){a.$set(a.clientParam,"packageName",e)},expression:"clientParam.packageName"}})],1),a._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:a.showTable,expression:"showTable"}],attrs:{label:"删除前缀"}},[t("el-input",{attrs:{placeholder:"可选，如：sys_user对应Java类为User(多前缀逗号隔开)","show-word-limit":"",maxlength:"100"},model:{value:a.clientParam.delPrefix,callback:function(e){a.$set(a.clientParam,"delPrefix",e)},expression:"clientParam.delPrefix"}})],1)],1),a._v(" "),t("el-row",{directives:[{name:"show",rawName:"v-show",value:a.showTable,expression:"showTable"}],attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("h4",[a._v("选择表")]),a._v(" "),t("el-input",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{"prefix-icon":"el-icon-search",clearable:"",size:"mini",placeholder:"过滤表"},model:{value:a.tableSearch,callback:function(e){a.tableSearch=e},expression:"tableSearch"}}),a._v(" "),t("el-table",{attrs:{data:a.tableListData,border:"","cell-style":a.cellStyleSmall(),"header-cell-style":a.headCellStyleSmall(),"row-class-name":a.tableRowClassName},on:{"selection-change":a.onTableListSelect}},[t("el-table-column",{attrs:{type:"selection"}}),a._v(" "),t("el-table-column",{attrs:{prop:"tableName",label:"表名"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:12,id:"templateSelect"}},[t("h4",[a._v("选择模板")]),a._v(" "),t("el-select",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{placeholder:"选择模板所在组",size:"mini"},on:{change:a.onDataGroupChange},model:{value:a.clientParam.groupName,callback:function(e){a.$set(a.clientParam,"groupName",e)},expression:"clientParam.groupName"}},a._l(a.groupData,(function(a){return t("el-option",{key:a.id,attrs:{label:""+a.groupName,value:a.id}})})),1),a._v(" "),t("el-table",{attrs:{data:a.templateListData,border:"","cell-style":a.cellStyleSmall(),"header-cell-style":a.headCellStyleSmall(),"row-class-name":a.templateTableRowClassName},on:{"selection-change":a.onTemplateListSelect}},[t("el-table-column",{attrs:{type:"selection"}}),a._v(" "),t("el-table-column",{attrs:{prop:"name",label:"模板名称"},scopedSlots:a._u([{key:"default",fn:function(e){return t("span",{},[a._v("\n              "+a._s(e.row.name)+"\n            ")])}}])})],1),a._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:a.showTable,expression:"showTable"}],attrs:{type:"primary"},on:{click:a.onGenerate}},[a._v("生成代码")])],1)],1),a._v(" "),t("el-dialog",{attrs:{title:a.datasourceTitle,visible:a.datasourceDlgShow},on:{"update:visible":function(e){a.datasourceDlgShow=e}}},[t("el-form",{ref:"datasourceForm",attrs:{model:a.datasourceFormData,rules:a.datasourceRule,size:"mini","label-width":"120px"}},[t("el-form-item",{attrs:{label:"数据库类型"}},[t("el-select",{attrs:{filterable:"","default-first-option":""},model:{value:a.datasourceFormData.dbType,callback:function(e){a.$set(a.datasourceFormData,"dbType",e)},expression:"datasourceFormData.dbType"}},a._l(a.dbTypeConfig,(function(a){return t("el-option",{key:a.dbType,attrs:{label:a.label,value:a.dbType}})})),1)],1),a._v(" "),t("el-form-item",{attrs:{label:"Host",prop:"host"}},[t("el-input",{attrs:{placeholder:"地址","show-word-limit":"",maxlength:"100"},model:{value:a.datasourceFormData.host,callback:function(e){a.$set(a.datasourceFormData,"host",e)},expression:"datasourceFormData.host"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"Port",prop:"port"}},[t("el-input",{attrs:{placeholder:"端口","show-word-limit":"",maxlength:"10"},model:{value:a.datasourceFormData.port,callback:function(e){a.$set(a.datasourceFormData,"port",e)},expression:"datasourceFormData.port"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"Database",prop:"dbName"}},[t("el-input",{attrs:{placeholder:"数据库","show-word-limit":"",maxlength:"64"},model:{value:a.datasourceFormData.dbName,callback:function(e){a.$set(a.datasourceFormData,"dbName",e)},expression:"datasourceFormData.dbName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"Username",prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名","show-word-limit":"",maxlength:"100"},model:{value:a.datasourceFormData.username,callback:function(e){a.$set(a.datasourceFormData,"username",e)},expression:"datasourceFormData.username"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码","show-word-limit":"",maxlength:"100"},model:{value:a.datasourceFormData.password,callback:function(e){a.$set(a.datasourceFormData,"password",e)},expression:"datasourceFormData.password"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[t("el-input",{attrs:{placeholder:"包名（package）","show-word-limit":"",maxlength:"100"},model:{value:a.datasourceFormData.packageName,callback:function(e){a.$set(a.datasourceFormData,"packageName",e)},expression:"datasourceFormData.packageName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"删除前缀",prop:"delPrefix"}},[t("el-input",{attrs:{placeholder:"删除前缀（表名sys_user删除前缀sys_对应bean为User）多前缀逗号隔开","show-word-limit":"",maxlength:"200"},model:{value:a.datasourceFormData.delPrefix,callback:function(e){a.$set(a.datasourceFormData,"delPrefix",e)},expression:"datasourceFormData.delPrefix"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"代码生成器模板",prop:"delPrefix"}},[t("el-select",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{placeholder:"选择模板所在组",size:"mini"},on:{change:a.onDataGroupChange},model:{value:a.datasourceFormData.groupName,callback:function(e){a.$set(a.datasourceFormData,"groupName",e)},expression:"datasourceFormData.groupName"}},a._l(a.groupData,(function(a){return t("el-option",{key:a.id,attrs:{label:""+a.groupName,value:a.id}})})),1)],1),a._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:a.onDatasourceTest}},[a._v("测试连接")]),a._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:a.onDatasourceSave}},[a._v("保存")])],1)],1)],1)],1)},r=[],l=(t("7514"),t("456d"),t("ac6a"),{data:function(){return{groupId:"",groupData:{},showTable:!0,clientParam:{datasourceConfigId:"",tableNames:[],templateConfigIdList:[],packageName:null,delPrefix:null,groupId:"",groupName:""},tableSearch:"",datasourceConfigList:[],tableListData:[],templateListData:[],datasourceTitle:"新建连接",datasourceDlgShow:!1,datasourceFormData:{id:0,dbType:1,host:"",port:"",username:"",password:"",dbName:"",packageName:"",delPrefix:"",groupId:"",groupName:""},dbTypeConfig:[],datasourceRule:{host:[{required:!0,message:"不能为空",trigger:"blur"}],port:[{required:!0,message:"不能为空",trigger:"blur"}],username:[{required:!0,message:"不能为空",trigger:"blur"}],password:[{required:!0,message:"不能为空",trigger:"blur"}],dbName:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){this.loadDataSource(),this.loadTemplate(),this.loadDbType(),this.loadGroups()},methods:{tableRowClassName:function(a){var e=a.row;a.index;return e.hidden=!1,0===this.tableSearch.length||e.tableName&&e.tableName.indexOf(this.tableSearch)>-1?"":(e.hidden=!0,"hidden-row")},templateTableRowClassName:function(a){var e=a.row;a.index;return e.hidden=!1,""==this.groupId||this.groupId<=0||e.groupId&&e.groupId==this.groupId?"":(e.hidden=!0,"hidden-row")},loadGroups:function(){this.post("/group/list/",{},(function(a){this.groupData=a.data}))},loadDataSource:function(){var a=this;this.post("/datasource/list",{},(function(e){a.datasourceConfigList=e.data}))},loadTemplate:function(){var a=this;this.post("/template/list",{},(function(e){a.templateListData=e.data}))},loadDbType:function(){var a=this;this.post("/datasource/dbtype",{},(function(e){a.dbTypeConfig=e.data}))},onDataSourceAdd:function(){var a=this;this.datasourceTitle="新建连接",Object.keys(this.datasourceFormData).forEach((function(e){a.datasourceFormData[e]=""})),this.datasourceFormData.id=0,this.datasourceDlgShow=!0},onTableListSelect:function(a){this.clientParam.tableNames=a.filter((function(a){return void 0===a.hidden||!1===a.hidden})).map((function(a){return a.tableName}))},onTemplateListSelect:function(a){this.clientParam.templateConfigIdList=a.filter((function(a){return void 0===a.hidden||!1===a.hidden})).map((function(a){return a.id}))},onDataSourceChange:function(a){var e=this;this.clientParam.datasourceConfigId=a,this.datasourceConfigList.find((function(t){t.id===a&&(e.clientParam.packageName=t.packageName,e.clientParam.delPrefix=t.delPrefix,e.groupId=t.groupId,e.groupData.find((function(a){a.id==t.groupId&&(e.clientParam.groupName=a.groupName)})),console.log("this.clientParam.groupName="+e.clientParam.groupName))})),this.post("/datasource/table/".concat(a),{},(function(a){e.showTable=!0,e.tableListData=a.data}))},onDataSourceUpdate:function(a){var e=this;this.datasourceTitle="修改连接",Object.assign(this.datasourceFormData,a),this.groupData.find((function(t){t.id==a.groupId&&(e.datasourceFormData.groupName=t.groupName)})),this.datasourceDlgShow=!0},onDataSourceDuplicate:function(a){this.datasourceTitle="".concat(a.host," Copy"),Object.assign(this.datasourceFormData,a),this.datasourceFormData.id=0,this.datasourceDlgShow=!0},onDataSourceDelete:function(a){this.confirm("确认要删除 ".concat(a.dbName," 吗？"),(function(e){var t={id:a.id};this.post("/datasource/del",t,(function(){e(),location.reload()}))}))},onGenerate:function(){var a=this;this.$refs.genForm.validate((function(e){if(e){if(0===a.clientParam.tableNames.length)return void a.tip("请勾选表","error");if(0===a.clientParam.templateConfigIdList.length)return void a.tip("请勾选模板","error");var t=JSON.stringify(a.clientParam);a.goRoute("result/".concat(t))}}))},onDatasourceTest:function(){var a=this;this.$refs.datasourceForm.validate((function(e){e&&a.post("/datasource/test",a.datasourceFormData,(function(e){a.tip("连接成功")}))}))},onDataGroupChange:function(a){""!=a&&(this.groupId=a,this.datasourceFormData.groupId=a)},onDatasourceSave:function(){var a=this;this.$refs.datasourceForm.validate((function(e){e&&a.post("/datasource/test",a.datasourceFormData,(function(e){a.datasourceFormData.id?a.post("/datasource/update",a.datasourceFormData,(function(a){location.reload()})):a.post("/datasource/add",a.datasourceFormData,(function(e){a.tip("添加成功"),a.loadDataSource(),a.datasourceDlgShow=!1}))}))}))}}}),s=l,i=(t("1764"),t("2877")),n=Object(i["a"])(s,o,r,!1,null,null,null);e["default"]=n.exports},"0a49":function(a,e,t){var o=t("9b43"),r=t("626a"),l=t("4bf8"),s=t("9def"),i=t("cd1c");a.exports=function(a,e){var t=1==a,n=2==a,c=3==a,u=4==a,d=6==a,m=5==a||d,p=e||i;return function(e,i,f){for(var h,g,b=l(e),v=r(b),D=o(i,f,3),w=s(v.length),y=0,x=t?p(e,w):n?p(e,0):void 0;w>y;y++)if((m||y in v)&&(h=v[y],g=D(h,y,b),a))if(t)x[y]=g;else if(g)switch(a){case 3:return!0;case 5:return h;case 6:return y;case 2:x.push(h)}else if(u)return!1;return d?-1:c||u?u:x}}},1169:function(a,e,t){var o=t("2d95");a.exports=Array.isArray||function(a){return"Array"==o(a)}},1764:function(a,e,t){"use strict";t("aa8f")},"456d":function(a,e,t){var o=t("4bf8"),r=t("0d58");t("5eda")("keys",(function(){return function(a){return r(o(a))}}))},"5eda":function(a,e,t){var o=t("5ca1"),r=t("8378"),l=t("79e5");a.exports=function(a,e){var t=(r.Object||{})[a]||Object[a],s={};s[a]=e(t),o(o.S+o.F*l((function(){t(1)})),"Object",s)}},7514:function(a,e,t){"use strict";var o=t("5ca1"),r=t("0a49")(5),l="find",s=!0;l in[]&&Array(1)[l]((function(){s=!1})),o(o.P+o.F*s,"Array",{find:function(a){return r(this,a,arguments.length>1?arguments[1]:void 0)}}),t("9c6c")(l)},aa8f:function(a,e,t){},cd1c:function(a,e,t){var o=t("e853");a.exports=function(a,e){return new(o(a))(e)}},e853:function(a,e,t){var o=t("d3f4"),r=t("1169"),l=t("2b4c")("species");a.exports=function(a){var e;return r(a)&&(e=a.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),o(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0efd67"],{"9a8a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-backtop"),e._v(" "),e.loading?a("div",[e._v("生成中...")]):a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-back"},on:{click:function(t){return e.goRoute("/generate/code")}}},[e._v("返回")]),e._v(" "),a("el-container",[a("el-aside",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.treeData.length>0,expression:"treeData.length > 0"}],staticStyle:{"margin-bottom":"10px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"搜索",size:"mini",clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"filter-node-method":e.filterNode,"node-key":"id","default-expand-all":"","highlight-current":""},on:{"current-change":e.onTreeSelect}})],1),e._v(" "),a("el-main",[a("codemirror",{attrs:{options:e.cmOptions},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1)],1)],1)},r=[],i=a("8f94");a("bbca");a("f9d4"),a("4ba6"),a("74bb"),a("d69f"),a("d5e0");var o={js:"text/javascript",java:"text/x-java",jsp:"application/x-jsp",html:"text/html",aspx:"application/x-aspx",xml:"xml"},l={components:{codemirror:i["codemirror"]},data:function(){return{loading:!0,clientParam:{datasourceConfigId:"",tableNames:[],templateConfigIdList:[],packageName:""},treeData:[],filterText:"",defaultProps:{children:"children",label:"text"},content:"",cmOptions:{value:"",mode:"text/x-java",theme:"neat",readOnly:!0}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this.$route.params.config||"";e&&(this.clientParam=JSON.parse(e),this.onGenerate())},methods:{onGenerate:function(){var e=this;0!==this.clientParam.tableNames.length?0!==this.clientParam.templateConfigIdList.length?this.post("/generate/code",this.clientParam,(function(t){e.loading=!1;var a=t.data;e.treeData=e.buildTreeData(a)})):this.tip("请勾选模板","error"):this.tip("请勾选表","error")},filterNode:function(e,t){return!e||-1!==t.text.indexOf(e)},buildTreeData:function(e){for(var t=[],a={},n=0,r=e.length;n<r;n++){var i=e[n],o=a[i.tableName];o||(o=[],a[i.tableName]=o),o.push({templateName:i.templateName,content:i.content})}for(var l in a){var c=a[l],s={text:l,children:this.buildChildren(c)};t.push(s)}return t},buildChildren:function(e){for(var t=[],a=0,n=e.length;a<n;a++){var r=e[a],i={text:r.templateName,attributes:{content:r.content}};t.push(i)}return t},onTreeSelect:function(e){e.children&&e.children.length>0||(this.content=e.attributes.content,this.changeMod(e.text))},changeMod:function(e){var t=this.getSuffix(e);this.cmOptions.mode=o[t]||"text/javascript"},getSuffix:function(e){var t=e.lastIndexOf(".");return-1===t?"js":e.substring(t+1,e.length)}}},c=l,s=a("2877"),d=Object(s["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports}}]);
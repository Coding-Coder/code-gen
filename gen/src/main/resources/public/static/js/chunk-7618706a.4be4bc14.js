(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7618706a"],{"067a":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" 生成代码")]),e._v(" "),a("generate-config")],1),e._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 生成历史")]),e._v(" "),a("generate-history")],1)],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"code-gen"},[a("el-form",{ref:"genForm",staticClass:"gen-form",attrs:{model:e.clientParam,size:"mini","label-width":"150px"}},[a("el-form-item",{attrs:{label:"选择数据源",prop:"datasourceConfigId",rules:{required:!0,message:"请选择数据源"}}},[a("el-select",{attrs:{placeholder:"选择数据源"},on:{change:e.onDataSourceChange},model:{value:e.clientParam.datasourceConfigId,callback:function(t){e.$set(e.clientParam,"datasourceConfigId",t)},expression:"clientParam.datasourceConfigId"}},e._l(e.datasourceConfigList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.dbName+"（"+t.host+"）",value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.dbName+"（"+t.host+"）")+" ")]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a("el-tooltip",{attrs:{placement:"top",content:"Duplicate"}},[a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:function(a){return a.stopPropagation(),e.onDataSourceDuplicate(t)}}})],1),e._v(" "),a("el-link",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return a.stopPropagation(),e.onDataSourceUpdate(t)}}}),e._v(" "),a("el-link",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return a.stopPropagation(),e.onDataSourceDelete(t)}}})],1)])})),1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.onDataSourceAdd}},[e._v("新建数据源")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],attrs:{label:"包名（package）"}},[a("el-input",{attrs:{placeholder:"可选，如：cn.studyjava.xxx","show-word-limit":"",maxlength:"100"},model:{value:e.clientParam.packageName,callback:function(t){e.$set(e.clientParam,"packageName",t)},expression:"clientParam.packageName"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],attrs:{label:"删除前缀"}},[a("el-input",{attrs:{placeholder:"可选，如：sys_user对应Java类为User(多前缀逗号隔开)","show-word-limit":"",maxlength:"100"},model:{value:e.clientParam.delPrefix,callback:function(t){e.$set(e.clientParam,"delPrefix",t)},expression:"clientParam.delPrefix"}})],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("h4",[e._v("选择表")]),e._v(" "),a("el-input",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{"prefix-icon":"el-icon-search",clearable:"",size:"mini",placeholder:"过滤表"},model:{value:e.tableSearch,callback:function(t){e.tableSearch=t},expression:"tableSearch"}}),e._v(" "),a("el-table",{attrs:{data:e.tableListData,border:"","cell-style":e.cellStyleSmall(),"header-cell-style":e.headCellStyleSmall(),"row-class-name":e.tableRowClassName},on:{"selection-change":e.onTableListSelect}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tableName",label:"表名"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12,id:"templateSelect"}},[a("h4",[e._v("选择模板")]),e._v(" "),a("el-select",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{placeholder:"选择模板所在组",size:"mini"},on:{change:e.onDataGroupChange},model:{value:e.clientParam.groupName,callback:function(t){e.$set(e.clientParam,"groupName",t)},expression:"clientParam.groupName"}},e._l(e.groupData,(function(e){return a("el-option",{key:e.id,attrs:{label:""+e.groupName,value:e.id}})})),1),e._v(" "),a("el-table",{attrs:{data:e.templateListData,border:"","cell-style":e.cellStyleSmall(),"header-cell-style":e.headCellStyleSmall(),"row-class-name":e.templateTableRowClassName},on:{"selection-change":e.onTemplateListSelect}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模板名称"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{},[e._v("\n              "+e._s(t.row.name)+"\n            ")])}}])})],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],attrs:{type:"primary"},on:{click:e.onGenerate}},[e._v("生成代码")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.datasourceTitle,visible:e.datasourceDlgShow},on:{"update:visible":function(t){e.datasourceDlgShow=t}}},[a("el-form",{ref:"datasourceForm",attrs:{model:e.datasourceFormData,rules:e.datasourceRule,size:"mini","label-width":"120px"}},[a("el-form-item",{attrs:{label:"数据库类型"}},[a("el-select",{attrs:{filterable:"","default-first-option":""},model:{value:e.datasourceFormData.dbType,callback:function(t){e.$set(e.datasourceFormData,"dbType",t)},expression:"datasourceFormData.dbType"}},e._l(e.dbTypeConfig,(function(e){return a("el-option",{key:e.dbType,attrs:{label:e.label,value:e.dbType}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Host",prop:"host"}},[a("el-input",{attrs:{placeholder:"地址","show-word-limit":"",maxlength:"100"},model:{value:e.datasourceFormData.host,callback:function(t){e.$set(e.datasourceFormData,"host",t)},expression:"datasourceFormData.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Port",prop:"port"}},[a("el-input",{attrs:{placeholder:"端口","show-word-limit":"",maxlength:"10"},model:{value:e.datasourceFormData.port,callback:function(t){e.$set(e.datasourceFormData,"port",t)},expression:"datasourceFormData.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Database",prop:"dbName"}},[a("el-input",{attrs:{placeholder:"数据库","show-word-limit":"",maxlength:"64"},model:{value:e.datasourceFormData.dbName,callback:function(t){e.$set(e.datasourceFormData,"dbName",t)},expression:"datasourceFormData.dbName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Username",prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名","show-word-limit":"",maxlength:"100"},model:{value:e.datasourceFormData.username,callback:function(t){e.$set(e.datasourceFormData,"username",t)},expression:"datasourceFormData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Password",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码","show-word-limit":"",maxlength:"100"},model:{value:e.datasourceFormData.password,callback:function(t){e.$set(e.datasourceFormData,"password",t)},expression:"datasourceFormData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[a("el-input",{attrs:{placeholder:"包名（package）","show-word-limit":"",maxlength:"100"},model:{value:e.datasourceFormData.packageName,callback:function(t){e.$set(e.datasourceFormData,"packageName",t)},expression:"datasourceFormData.packageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"删除前缀",prop:"delPrefix"}},[a("el-input",{attrs:{placeholder:"删除前缀（表名sys_user删除前缀sys_对应bean为User）多前缀逗号隔开","show-word-limit":"",maxlength:"200"},model:{value:e.datasourceFormData.delPrefix,callback:function(t){e.$set(e.datasourceFormData,"delPrefix",t)},expression:"datasourceFormData.delPrefix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码生成器模板",prop:"delPrefix"}},[a("el-select",{staticStyle:{"margin-bottom":"10px",width:"100%"},attrs:{placeholder:"选择模板所在组",size:"mini"},on:{change:e.onDataGroupChange},model:{value:e.datasourceFormData.groupName,callback:function(t){e.$set(e.datasourceFormData,"groupName",t)},expression:"datasourceFormData.groupName"}},e._l(e.groupData,(function(e){return a("el-option",{key:e.id,attrs:{label:""+e.groupName,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:e.onDatasourceTest}},[e._v("测试连接")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onDatasourceSave}},[e._v("保存")])],1)],1)],1)],1)},l=[],s=(a("7514"),a("456d"),a("ac6a"),{name:"GenerateConfig",data:function(){return{groupId:"",groupData:{},showTable:!1,clientParam:{datasourceConfigId:"",tableNames:[],templateConfigIdList:[],packageName:null,delPrefix:null,groupId:"",groupName:""},tableSearch:"",datasourceConfigList:[],tableListData:[],templateListData:[],datasourceTitle:"新建连接",datasourceDlgShow:!1,datasourceFormData:{id:0,dbType:1,host:"",port:"",username:"",password:"",dbName:"",packageName:"",delPrefix:"",groupId:"",groupName:""},dbTypeConfig:[],datasourceRule:{host:[{required:!0,message:"不能为空",trigger:"blur"}],port:[{required:!0,message:"不能为空",trigger:"blur"}],username:[{required:!0,message:"不能为空",trigger:"blur"}],password:[{required:!0,message:"不能为空",trigger:"blur"}],dbName:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){this.loadDataSource(),this.loadTemplate(),this.loadDbType(),this.loadGroups()},methods:{tableRowClassName:function(e){var t=e.row;e.index;return t.hidden=!1,0===this.tableSearch.length||t.tableName&&t.tableName.toLowerCase().indexOf(this.tableSearch.toLowerCase())>-1?"":(t.hidden=!0,"hidden-row")},templateTableRowClassName:function(e){var t=e.row;e.index;return t.hidden=!1,""==this.groupId||this.groupId<=0||t.groupId&&t.groupId==this.groupId?"":(t.hidden=!0,"hidden-row")},loadGroups:function(){this.post("/group/list/",{},(function(e){this.groupData=e.data}))},loadDataSource:function(){var e=this;this.post("/datasource/list",{},(function(t){e.datasourceConfigList=t.data}))},loadTemplate:function(){var e=this;this.post("/template/list",{},(function(t){e.templateListData=t.data}))},loadDbType:function(){var e=this;this.post("/datasource/dbtype",{},(function(t){e.dbTypeConfig=t.data}))},onDataSourceAdd:function(){var e=this;this.datasourceTitle="新建连接",Object.keys(this.datasourceFormData).forEach((function(t){e.datasourceFormData[t]=""})),this.datasourceFormData.id=0,this.datasourceDlgShow=!0},onTableListSelect:function(e){this.clientParam.tableNames=e.filter((function(e){return void 0===e.hidden||!1===e.hidden})).map((function(e){return e.tableName}))},onTemplateListSelect:function(e){this.clientParam.templateConfigIdList=e.filter((function(e){return void 0===e.hidden||!1===e.hidden})).map((function(e){return e.id}))},onDataSourceChange:function(e){var t=this;this.clientParam.datasourceConfigId=e,this.datasourceConfigList.find((function(a){a.id===e&&(t.clientParam.packageName=a.packageName,t.clientParam.delPrefix=a.delPrefix,t.groupId=a.groupId,t.groupData.find((function(e){e.id==a.groupId&&(t.clientParam.groupName=e.groupName)})),console.log("this.clientParam.groupName="+t.clientParam.groupName))})),this.post("/datasource/table/".concat(e),{},(function(e){t.showTable=!0,t.tableListData=e.data}))},onDataSourceUpdate:function(e){var t=this;this.datasourceTitle="修改连接",Object.assign(this.datasourceFormData,e),this.groupData.find((function(a){a.id==e.groupId&&(t.datasourceFormData.groupName=a.groupName)})),this.datasourceDlgShow=!0},onDataSourceDuplicate:function(e){this.datasourceTitle="".concat(e.host," Copy"),Object.assign(this.datasourceFormData,e),this.datasourceFormData.id=0,this.datasourceDlgShow=!0},onDataSourceDelete:function(e){this.confirm("确认要删除 ".concat(e.dbName," 吗？"),(function(t){var a={id:e.id};this.post("/datasource/del",a,(function(){t(),location.reload()}))}))},onGenerate:function(){var e=this;this.$refs.genForm.validate((function(t){if(t){if(0===e.clientParam.tableNames.length)return void e.tip("请勾选表","error");if(0===e.clientParam.templateConfigIdList.length)return void e.tip("请勾选模板","error");var a=JSON.stringify(e.clientParam);e.goRoute("result/".concat(a))}}))},onDatasourceTest:function(){var e=this;this.$refs.datasourceForm.validate((function(t){t&&e.post("/datasource/test",e.datasourceFormData,(function(t){e.tip("连接成功")}))}))},onDataGroupChange:function(e){""!=e&&(this.groupId=e,this.datasourceFormData.groupId=e)},onDatasourceSave:function(){var e=this;this.$refs.datasourceForm.validate((function(t){t&&e.post("/datasource/test",e.datasourceFormData,(function(t){e.datasourceFormData.id?e.post("/datasource/update",e.datasourceFormData,(function(e){location.reload()})):e.post("/datasource/add",e.datasourceFormData,(function(t){e.tip("添加成功"),e.loadDataSource(),e.datasourceDlgShow=!1}))}))}))}}}),i=s,c=(a("da9a"),a("2877")),u=Object(c["a"])(i,n,l,!1,null,null,null),d=u.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"generateTime",label:"生成时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"datasource",label:"数据源",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"packageName",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.configContent.packageName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"删除前缀",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.configContent.delPrefix)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.configContent.tableNames.length<=5?a("div",[e._v("\n          "+e._s(t.row.configContent.tableNames.join("、"))+"\n        ")]):a("div",[e._v("\n          "+e._s(e.showArray(t.row.configContent.tableNames,3,"、"))+"\n          "),a("el-popover",{attrs:{placement:"left",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.configContent.tableNames,"max-height":"400px"}},[a("el-table-column",{attrs:{label:"表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row))]}}],null,!0)})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("更多")])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"templateNames",label:"模板","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.templateNames&&t.row.templateNames.join("、"))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.onGenerate(t.row)}}},[e._v("再次生成")])]}}])})],1)],1)},p=[],f={name:"GenerateHistory",data:function(){return{tableData:[]}},created:function(){this.loadTable()},methods:{loadTable:function(){this.post("/history/list",{},(function(e){this.tableData=e.data}))},onGenerate:function(e){var t=JSON.stringify(e.configContent);this.goRoute("result/".concat(t))},showArray:function(e,t,a){if(!e||0===e.length)return"";for(var o=[],r=0;r<Math.min(t,e.length);r++)o.push(e[r]);return o.join(a)}}},h=f,b=Object(c["a"])(h,m,p,!1,null,null,null),g=b.exports,v={components:{GenerateConfig:d,GenerateHistory:g},data:function(){return{activeName:"first"}}},w=v,D=Object(c["a"])(w,o,r,!1,null,null,null);t["default"]=D.exports},"0a49":function(e,t,a){var o=a("9b43"),r=a("626a"),n=a("4bf8"),l=a("9def"),s=a("cd1c");e.exports=function(e,t){var a=1==e,i=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d,p=t||s;return function(t,s,f){for(var h,b,g=n(t),v=r(g),w=o(s,f,3),D=l(v.length),_=0,y=a?p(t,D):i?p(t,0):void 0;D>_;_++)if((m||_ in v)&&(h=v[_],b=w(h,_,g),e))if(a)y[_]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return _;case 2:y.push(h)}else if(u)return!1;return d?-1:c||u?u:y}}},1169:function(e,t,a){var o=a("2d95");e.exports=Array.isArray||function(e){return"Array"==o(e)}},"456d":function(e,t,a){var o=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(e){return r(o(e))}}))},"5eda":function(e,t,a){var o=a("5ca1"),r=a("8378"),n=a("79e5");e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],l={};l[e]=t(a),o(o.S+o.F*n((function(){a(1)})),"Object",l)}},7514:function(e,t,a){"use strict";var o=a("5ca1"),r=a("0a49")(5),n="find",l=!0;n in[]&&Array(1)[n]((function(){l=!1})),o(o.P+o.F*l,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},c1ad:function(e,t,a){},cd1c:function(e,t,a){var o=a("e853");e.exports=function(e,t){return new(o(e))(t)}},da9a:function(e,t,a){"use strict";var o=a("c1ad"),r=a.n(o);r.a},e853:function(e,t,a){var o=a("d3f4"),r=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),o(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
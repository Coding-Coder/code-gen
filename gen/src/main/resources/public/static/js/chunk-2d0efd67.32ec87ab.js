(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0efd67"],{"9a8a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-backtop"),t._v(" "),t.loading?n("div",[t._v("生成中...")]):n("div",[n("el-button",{attrs:{type:"text",icon:"el-icon-back"},on:{click:function(e){return t.goRoute("/generate/code")}}},[t._v("返回")]),t._v(" "),n("el-container",[n("el-aside",[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.treeData.length>0,expression:"treeData.length > 0"}],staticStyle:{"margin-bottom":"10px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"搜索",size:"mini",clearable:""},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"filter-node-method":t.filterNode,"node-key":"id","default-expand-all":"","highlight-current":""},on:{"current-change":t.onTreeSelect}})],1),t._v(" "),n("el-main",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.content.length>0,expression:"content.length > 0"}],staticClass:"copyBtn",attrs:{type:"text","data-clipboard-text":t.content}},[t._v("复制代码")]),t._v(" "),n("codemirror",{attrs:{options:t.cmOptions},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)],1)],1)},i=[],r=n("8f94");n("bbca");n("f9d4"),n("4ba6"),n("74bb"),n("d69f"),n("d5e0");var o={js:"text/javascript",java:"text/x-java",jsp:"application/x-jsp",html:"text/html",aspx:"application/x-aspx",xml:"xml"},l={components:{codemirror:r["codemirror"]},data:function(){return{loading:!0,clientParam:{datasourceConfigId:"",tableNames:[],templateConfigIdList:[],packageName:""},treeData:[],filterText:"",defaultProps:{children:"children",label:"text"},content:"",cmOptions:{value:"",mode:"text/x-java",theme:"neat",readOnly:!0}}},watch:{filterText:function(t){this.$refs.tree.filter(t)}},created:function(){var t=this.$route.params.config||"";t&&(this.clientParam=JSON.parse(t),this.onGenerate()),this.initCopy()},destroyed:function(){this.cleanCopy()},methods:{onGenerate:function(){var t=this;0!==this.clientParam.tableNames.length?0!==this.clientParam.templateConfigIdList.length?this.post("/generate/code",this.clientParam,(function(e){t.loading=!1;var n=e.data;t.treeData=t.buildTreeData(n)})):this.tip("请勾选模板","error"):this.tip("请勾选表","error")},filterNode:function(t,e){return!t||-1!==e.text.indexOf(t)},buildTreeData:function(t){for(var e=[],n={},a=0,i=t.length;a<i;a++){var r=t[a],o=n[r.tableName];o||(o=[],n[r.tableName]=o),o.push({templateName:r.templateName,content:r.content})}for(var l in n){var c=n[l],s={text:l,children:this.buildChildren(c)};e.push(s)}return e},buildChildren:function(t){for(var e=[],n=0,a=t.length;n<a;n++){var i=t[n],r={text:i.templateName,attributes:{content:i.content}};e.push(r)}return e},onTreeSelect:function(t){t.children&&t.children.length>0||(this.content=t.attributes.content,this.changeMod(t.text))},changeMod:function(t){var e=this.getSuffix(t);this.cmOptions.mode=o[e]||"text/javascript"},getSuffix:function(t){var e=t.lastIndexOf(".");return-1===e?"js":t.substring(e+1,t.length)}}},c=l,s=n("2877"),d=Object(s["a"])(c,a,i,!1,null,null,null);e["default"]=d.exports}}]);
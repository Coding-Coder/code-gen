var FDTableView=function(a,b){FDLib.implement(this,View);this.each=FDLib.util.each;this.options=a;this.grid=b;this.resultData=null;this.headView=this._buildHeadView();this.cellViews=this._buildCellView();this.paginationView=this._buildPaginationView();this.gridDomMap=this.options.gridDomMap;this.renderTo(this.options.domId)};FDTableView.prototype.getTableView=function(){return this};FDTableView.prototype.processData=function(a){this.resultData=a;this.removeAllData();if((this.resultData[GlobalParams.serverRowsName]||[]).length>0){this._buildGridData()}else{this.showNoResultMsg()}this._refreshPaginationInfo(a)};FDTableView.prototype.renderTo=function(b){this._initTableDom();var a=FDLib.getEl(b)||document.body;a.appendChild(this.gridDomMap.gridDiv_3)};FDTableView.prototype.removeAllData=function(){this.gridDomMap.tbody_0.parentNode.removeChild(this.gridDomMap.tbody_0);this.gridDomMap.tbody_0=document.createElement(FDTag.TBODY);this.gridDomMap.table_1.appendChild(this.gridDomMap.tbody_0)};FDTableView.prototype._setTrStyle=function(b,c){var a="ui-widget-content";if(c%2===0){a+=" pui-datatable-even"}else{a+=" pui-datatable-odd"}b.className=a};FDTableView.prototype._buildHeadView=function(){return new FDHeadView(this.options,this.grid)};FDTableView.prototype._buildPaginationView=function(){return new FDPaginationView(this.options,this.grid)};FDTableView.prototype._refreshPaginationInfo=function(a){this.paginationView.refreshPaginationInfo(a)};FDTableView.prototype._buildGridData=function(){this.hideTable();var b=this.resultData[GlobalParams.serverRowsName]||[];var a=this;this.each(b,function(c,d){a.insertRow(d,c)});this.showTable()};FDTableView.prototype.showNoResultMsg=function(){var a=this.gridDomMap.tbody_0.insertRow(0);var c=a.insertCell(0);var b=this.getColsLen();c.innerHTML=this.options.noDataText;c.setAttribute("colspan",b);c.setAttribute("align","center")};FDTableView.prototype.getColsLen=function(){var b=this.options.columns.length;var a=this.options.selectOption||{};if(a.singleSelect||a.multiSelect){b++}if(this.options.actionButtons.length>0){b++}return b};FDTableView.prototype.insertRow=function(c,b){var a=this.gridDomMap.tbody_0.insertRow(c);this._setTrEvent(a,b,c);this._setTrStyle(a,c);this.options.rowRender(b,a,c);this._buildRowCellsHtml(b,a,c)};FDTableView.prototype._setTrEvent=function(c,b,e){var a=this;var d=this.options.onClickRow;FDLib.event.addEvent(c,"click",function(){a.grid._bindClickRowClass(c);d(b,e)})};FDTableView.prototype._clearAllSelected=function(b){var c=this.gridDomMap.tbody_0.rows;var a=FDLib.dom;FDLib.util.each(c,function(d){if(a.hasClass(d,b)){a.removeClass(d,b);return false}})};FDTableView.prototype._buildRowCellsHtml=function(b,a,c){this.each(this.cellViews,function(e,d){var f=a.insertCell(d);e.buildCellData(b,f,c,a)})};FDTableView.prototype.showTable=function(){this.gridDomMap.table_1.style.display=""};FDTableView.prototype.hideTable=function(){this.gridDomMap.table_1.style.display="none"};FDTableView.prototype._buildCellView=function(){var c=this.options.columns;var a=[];var b=this;a=this._addRowSelectAbility(a);this.each(c,function(d){a.push(new FDCellView(d,b.options))});a=this._addActionButtonAbility(a);return a};FDTableView.prototype._addRowSelectAbility=function(a){if(this.multiSelect()||this.singleSelect()){a.push(new FDRowSelectView(this.options.selectOption,this.options))}return a};FDTableView.prototype._addActionButtonAbility=function(a){var b=this.options.actionButtons;if(FDLib.util.isArray(b)&&b.length>0){a.push(new FDButtonView(this.options.actionColumnConfig,this.options))}return a};FDTableView.prototype.multiSelect=function(){return this.options.selectOption.multiSelect};FDTableView.prototype.singleSelect=function(){return this.options.selectOption.singleSelect};FDTableView.prototype._initTableDom=function(){this._initFrame();this._initHeadDom();this._initPaginDom();this.setStyle();this._initTableSize()};FDTableView.prototype._initFrame=function(){this.gridDomMap.gridDiv_3=document.createElement(FDTag.DIV);this.gridDomMap.tableDiv_2=document.createElement(FDTag.DIV);this.gridDomMap.table_1=document.createElement(FDTag.TABLE);this.gridDomMap.tbody_0=document.createElement(FDTag.TBODY);this.gridDomMap.table_1.appendChild(this.gridDomMap.tbody_0);this.gridDomMap.tableDiv_2.appendChild(this.gridDomMap.table_1);this.gridDomMap.gridDiv_3.appendChild(this.gridDomMap.tableDiv_2)};FDTableView.prototype.setStyle=function(){this.gridDomMap.gridDiv_3.className="pui-datatable ui-widget";this.gridDomMap.tbody_0.className="pui-datatable-data";this.gridDomMap.tableDiv_2.className="pui-datatable-scrollable-body"};FDTableView.prototype._initHeadDom=function(){this.headView.buildHead()};FDTableView.prototype._initPaginDom=function(){this.paginationView.buildPagination()};FDTableView.prototype._initTableSize=function(){var b=this.options.width;var a=this.options.height;if(b){this.gridDomMap.gridDiv_3.style.width=FDLib.util.getPX(b)}if(a){this.gridDomMap.tableDiv_2.style.height=FDLib.util.getPX(a)}};FDTableView.prototype._resetHeight=function(){this.gridDomMap.tableDiv_2.style.height="auto"};